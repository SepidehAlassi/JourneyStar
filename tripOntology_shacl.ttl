@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix currencyA: <https://spec.edmcouncil.org/fibo/ontology/FND/Accounting/CurrencyAmount/> .
@prefix currency: <https://spec.edmcouncil.org/fibo/ontology/FND/Accounting/ISO4217-CurrencyCodes/>.
@prefix schema: <https://schema.org/> .
@prefix dbr: <http://dbpedia.org/resource/> .
@prefix dbo: <http://dbpedia.org/ontology/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix trip-shacl: <http://www.dhlab.unibas.ch/shacl/trip-shacl#> .
@prefix trip-onto: <http://www.dhlab.unibas.ch/ontology/trip-onto#> .
@prefix : <http://www.dhlab.unibas.ch/shacl/trip-shacl/> .



# ##############################################################
## Node Shapes
# ##############################################################


### Shape for Class Person ###
################################

:PersonShape a sh:NodeShape  ;
    sh:targetClass trip-onto:Person ;
    sh:property [
        sh:path schema:name ;
        sh:minCount 1 ;
        sh:datatype xsd:string ;
    ],
    [
        sh:path schema:givenName ;
        sh:datatype xsd:string ;
    ] ,
    [
        sh:path schema:familyName ;
        sh:datatype xsd:string ;
    ] ,
    [
        sh:path schema:gender ;
        sh:or ([sh:datatype xsd:string ]
                [sh:in ( schema:Female schema:Male )]);
    ] ,
    [
        sh:path schema:birthDate ;
        sh:maxCount 1 ;
        sh:datatype xsd:date ;
    ]
    ,
    [
        sh:path schema:birthPlace ;
        sh:maxCount 1;
        sh:node :LocationShape ;
    ],
    [
        sh:path schema:knows ;
        sh:or ([sh:class trip-onto:Location ]
               [sh:class trip-onto:Person ]) ;
    ],
    [
        sh:path trip-onto:hasJourney ;
        sh:node :JourneyShape ;
    ],
    [
        sh:path trip-onto:participatedIn ;
        sh:class trip-onto:Activity ;
    ] ,
    [
        sh:path trip-onto:hasGnd ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
    ],
    [
        sh:path trip-onto:hasWikiLink ;
        sh:maxCount 1 ;
    ] .

### Shape for Class Location ###
################################

:LocationShape a sh:NodeShape  ;
    sh:targetClass trip-onto:Location ;
    sh:property
    [
        sh:path trip-onto:hasGeonameID ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
    ] ,
    [
        sh:path schema:name ;
        sh:minCount 1 ;
        sh:languageIn ("en" "de" "fr" "es") ;
    ] ,
    [
        sh:path trip-onto:hasWikiLink ;
        sh:maxCount 1 ;
    ] .


### Shape for Class Journey ###
################################
:JourneyShape a sh:NodeShape  ;
    sh:targetClass trip-onto:Journey ;
    sh:property
    [
        sh:path trip-onto:hasStay ;
        sh:node :StayShape ;
    ] ,
    [
        sh:path trip-onto:hasStage ;
        sh:node :JourneyShape ;
    ] .

### Shape for Class Excursion ###
################################
:ExcursionShape a sh:NodeShape  ;
    sh:targetClass trip-onto:Excursion ;
    sh:property
    [
        sh:path trip-onto:hasDestination ;
        sh:equals trip-onto:hasStartLocation ;
        sh:severity sh:Violation ;
        sh:message "An excursion is specified by returning back to the location of departure after visiting a different location"@en;
    ] .


### Shape for Class Stay ###
################################
:StayShape a sh:NodeShape  ;
    sh:targetClass trip-onto:Stay ;
    sh:property
	  [
        sh:path trip-onto:hasAccommodation ;
        sh:datatype :AccommodationShape ;
    ] ,
    [
        sh:path trip-onto:hasExcursion ;
        sh:node :ExcursionShape ;
    ] .

### Shape for Class Accomodation ###
################################
:AccommodationShape a sh:NodeShape ;
    sh:targetClass trip-onto:Accommodation ;
    sh:property
    [
        sh:path schema:name ;
        sh:minCount 1 ;
        sh:datatype xsd:string ;
    ] ,
    [
        sh:path schema:adress ;
        sh:datatype xsd:string ;
    ] .

### Shape for Class Activity ###
################################
:ActivityShape a sh:NodeShape;
    sh:targetClass trip-onto:Activity;
    sh:property
    [
        sh:path trip-onto:hasParticipant;
        sh:node :PersonShape;
    ] ,
    [
        sh:path schema:name;
        sh:datatype xsd:string;
    ] ,
    [
        sh:path trip-onto:hasLocation;
        sh:or ( [sh:datatype xsd:string ]
                [sh:class trip-onto:Location ]
                [sh:datatype xsd:anyURI ]
                [sh:nodeKind sh:IRI ]) ;
    ] .

### Shape for Class SightSeeing ###
################################
:SightSeeingShape a sh:NodeShape;
    sh:targetClass trip-onto:SightSeeing;
    sh:property
    [
        sh:path trip-onto:sightingOf;
        sh:minCount 1 ;
        sh:or ([sh:datatype xsd:anyURI ]
                [sh:nodeKind sh:IRI]
                [sh:datatype xsd:string ]);
    ].

### Shape for Class Dining ###
################################
:DiningShape a sh:NodeShape;
    sh:targetClass trip-onto:Dining;
    sh:property
    [
        sh:path trip-onto:mealType;
        sh:datatype xsd:string;
    ],
    [
        sh:path trip-onto:cuisine ;
        sh:datatype xsd:string;
    ].

### Shape for Class Entertainment ###
################################
:EntertainmentShape a sh:NodeShape;
    sh:targetClass trip-onto:Entertainment ;
    sh:property
    [
        sh:path trip-onto:entertainmentType ;
        sh:datatype xsd:string;
    ] .


### Shape for Class Entry ###
################################
:EntryShape a sh:NodeShape  ;
    sh:targetClass trip-onto:Entry ;
    sh:property
    [
        sh:path trip-onto:hasTextContent ;
        sh:node :TextContentShape;
    ],
    [
        sh:path trip-onto:hasDate ;
        sh:or ( [sh:datatype xsd:dateTime ]
                [sh:datatype xsd:date ]
                [sh:datatype xsd:gYear ]) ;
    ] .


### Shape for Class TextContent ###
################################
:TextContentShape a sh:NodeShape;
    sh:targetClass trip-onto:TextContent;
    sh:property
    [
        sh:path trip-onto:hasText;
        sh:datatype xsd:string;
    ].


# ##############################################################
## Shapes for Star Properties
# ##############################################################

### Shape for  accordingTo ###
################################
:accordingToPropertyShape
    	a sh:NodeShape ;
    	sh:targetObjectsOf trip-onto:accordingTo ;
    	sh:or ([sh:node :PersonShape]
    	        [sh:nodeKind sh:IRI]) .

### Shape for Property mentionedIn ###
################################
:mentionedInPropertyShape
    	a sh:NodeShape ;
    	sh:targetObjectsOf trip-onto:mentionedIn ;
    	sh:or ([sh:node :EntryShape]
    	        [sh:nodeKind sh:IRI]) .

### Shape for Property hasDescription ###
################################
:hasDescriptionPropertyShape
    	a sh:NodeShape ;
    	sh:targetObjectsOf trip-onto:hasDescription ;
    	sh:datatype xsd:string .

### Shape for Property hasStartLocation ###
################################
:hasStartLocationPropertyShape
    	a sh:NodeShape ;
    	sh:targetObjectsOf trip-onto:hasStartLocation ;
    	sh:or ([sh:class trip-onto:Location]
    	        [sh:nodeKind sh:IRI]) .

###  hasDestination ###
:hasDestinationPropertyShape
    	a sh:NodeShape ;
    	sh:targetObjectsOf trip-onto:hasDestination ;
    	sh:or ([sh:class trip-onto:Location]
    	        [sh:nodeKind sh:IRI]) .

# hasArrival
:hasArrivalPropertyShape
    a sh:NodeShape ;
    sh:targetObjectsOf trip-onto:hasArrival;
    sh:or ( [sh:datatype xsd:dateTime ]
                [sh:datatype xsd:date ]
                [sh:datatype xsd:time ]) .

# hasDeparture
:hasDeparturePropertyShape
    a sh:NodeShape ;
    sh:targetObjectsOf trip-onto:hasDeparture;
    sh:or ( [sh:datatype xsd:dateTime ]
                [sh:datatype xsd:date ]
                [sh:datatype xsd:time ]) .

###  hasStartDate ###
:hasStartDatePropertyShape
    	a sh:NodeShape ;
    	sh:targetObjectsOf trip-onto:hasStartDate ;
    	sh:or ( [sh:datatype xsd:dateTime ]
                [sh:datatype xsd:date ]
                [sh:datatype xsd:time ]) .

###  hasEndDate ###
:hasEndDatePropertyShape
    	a sh:NodeShape ;
    	sh:targetObjectsOf trip-onto:hasEndDate ;
    	sh:or ( [sh:datatype xsd:dateTime ]
                [sh:datatype xsd:date ]
                [sh:datatype xsd:time ]) .

###  meanOfTransportation ###
:meanOfTransportationShape
    	a sh:NodeShape ;
    	sh:targetObjectsOf trip-onto:meanOfTransportation ;
        sh:or ( [sh:datatype xsd:anyURI ]
              [sh:nodeKind sh:IRI ]
              [sh:datatype xsd:string ]) .

### hasIntermediateDestination###
:hasIntermediateDestinationPropertyShape
    	a sh:NodeShape ;
    	sh:targetObjectsOf trip-onto:hasIntermediateDestination ;
    	sh:or ([sh:node :Locationshape]
                [sh:nodeKind sh:IRI]
                [sh:datatype xsd:anyURI]) .

### hasStage ###
:hasStagePropertyShape
    	a sh:NodeShape ;
    	sh:targetObjectsOf trip-onto:hasStage ;
    	sh:node :JourneyShape .

### has stay ###
:hasStayPropertyShape
    a sh:NodeShape;
    sh:targetObjectsOf trip-onto:hasStay;
    sh:node :StayShape .

### has activity ###
:hasActivityPropertyShape
    a sh:NodeShape;
    sh:targetObjectsOf trip-onto:hasActivity;
    sh:node :ActivityShape .

### has occurence ###
:hasOccurrencePropertyShape
    a sh:NodeShape;
    sh:targetObjectsOf trip-onto:hasOccurrence;
    sh:datatype xsd:string .

### has transit ###
:hasTransitPropertyShape
    a sh:NodeShape;
    sh:targetObjectsOf trip-onto:hasTransitFrom;
    sh:or ([sh:node :LocationShape ]
            [sh:nodeKind sh:IRI]
            [sh:datatype xsd:anyURI]).

### hasCost ###
:hasCostPropertyShape
    a sh:NodeShape;
    sh:targetObjectsOf trip-onto:hasCost;
    sh:or ( [sh:datatype xsd:float ]
            [sh:datatype xsd:integer ]).

### currency ###
:hasCurrencyPropertyShape
    a sh:NodeShape;
    sh:targetObjectsOf trip-onto:hasCurrency;
    sh:or ( [sh:datatype xsd:string ]
            [sh:datatype xsd:anyURI]
            [sh:nodeKind sh:IRI ]) .

### wikilink ###
:hasWikiLinkPropertyShape
    a sh:NodeShape;
    sh:targetObjectsOf trip-onto:hasWikiLink;
    sh:or ([sh:nodeKind sh:IRI]
            [sh:datatype xsd:anyURI]).
